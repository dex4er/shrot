---

- hosts: all

  vars:
    hostname: ~
    dnsdomainname: ~

  tasks:

  - name: set hostname
    template: src=templates/etc_hostname.j2 dest=/etc/hostname
    when: hostname is not none

  - name: set dnsdomainname
    template: src=templates/etc_dnsdomainname.j2 dest=/etc/dnsdomainname
    when: dnsdomainname is not none

  - name: invoke dnsdomainname.sh
    service: name=dnsdomainname.sh state=restarted

